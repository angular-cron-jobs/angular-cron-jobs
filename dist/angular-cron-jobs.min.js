/**
 * UI Component For Creating Cron Job Syntax To Send To Server
 * @version v1.4.1 - 2015-11-17 * @link https://github.com/jacobscarter/angular-cron-jobs
 * @author Jacob Carter <jacob@ieksolutions.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("templates-angularcronjobs",["cronselection.html"]),angular.module("cronselection.html",[]).run(["$templateCache",function(a){a.put("cronselection.html",'<div class="cron-wrap">\n<span>Every: </span>\n	<select class="cron-select" ng-model="myFrequency.base" ng-options="item.value as item.label for item in frequency"></select>\n\n	<div class="select-options" ng-if="!multiMode">\n		<span ng-show="myFrequency.base == 4"> on </span>\n		<select ng-show="myFrequency.base == 4" class="cron-select day-value" ng-model="myFrequency.dayValue" ng-options="(value | cronDayName) for value in dayValue"></select>\n		<span ng-show="myFrequency.base >= 5">on the </span>\n		<select ng-show="myFrequency.base >= 5" class="cron-select day-of-month-value" ng-model="myFrequency.dayOfMonthValue" ng-options="(value | cronNumeral) for value in dayOfMonthValue" ></select>\n		<span ng-show="myFrequency.base == 6">of </span>\n		<select ng-show="myFrequency.base == 6" class="cron-select month-value" ng-model="myFrequency.monthValue" ng-options="(value | cronMonthName) for value in monthValue" ></select>\n		<span ng-show="myFrequency.base >= 2">at </span>\n		<select ng-show="myFrequency.base >= 3" class="cron-select hour-value" ng-model="myFrequency.hourValue" ng-options="value for value in hourValue"></select>\n		<span ng-show="myFrequency.base >= 3"> : </span>\n		<select ng-show="myFrequency.base >= 2" class="cron-select minute-value" ng-model="myFrequency.minuteValue" ng-options="value for value in minuteValue"></select>\n		<span ng-show="myFrequency.base == 2"> past the hour</span>\n	</div>\n\n    <div class="select-options" ng-if="multiMode">\n        <span ng-show="myFrequency.base == 4"> on </span>\n        <select multiple=\'multiple\'  ng-show="myFrequency.base == 4" class="cron-select day-value" ng-model="myFrequency.dayValue" ng-options="(value | cronDayName) for value in dayValue"></select>\n        <span ng-show="myFrequency.base >= 5">on the </span>\n        <select multiple=\'multiple\'  ng-show="myFrequency.base >= 5" class="cron-select day-of-month-value" ng-model="myFrequency.dayOfMonthValue" ng-options="(value | cronNumeral) for value in dayOfMonthValue" ></select>\n        <span ng-show="myFrequency.base == 6">of </span>\n        <select multiple=\'multiple\'  ng-show="myFrequency.base == 6" class="cron-select month-value" ng-model="myFrequency.monthValue" ng-options="(value | cronMonthName) for value in monthValue" ></select>\n        <span ng-show="myFrequency.base >= 2">at </span>\n        <select multiple=\'multiple\'  ng-show="myFrequency.base >= 3" class="cron-select hour-value" ng-model="myFrequency.hourValue" ng-options="value for value in hourValue"></select>\n        <span ng-show="myFrequency.base >= 3"> : </span>\n        <select multiple=\'multiple\'  ng-show="myFrequency.base >= 2" class="cron-select minute-value" ng-model="myFrequency.minuteValue" ng-options="value for value in minuteValue"></select>\n        <span ng-show="myFrequency.base == 2"> past the hour</span>\n    </div>\n</div>\n')}]),angular.module("angular-cron-jobs",["templates-angularcronjobs"]),function(){"use strict";angular.module("angular-cron-jobs").value("cronFrequency",{EVERY_MINUTE:1,EVERY_HOUR:2,EVERY_DAY:3,EVERY_WEEK:4,EVERY_MONTH:5,EVERY_YEAR:6})}(),function(){"use strict";angular.module("angular-cron-jobs").directive("cronSelection",["cronService","cronFrequency",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,scope:{config:"=",output:"=?",init:"=?",multiMode:"="},templateUrl:function(a,b){return b.template||"cronselection.html"},link:function(c){var d=void 0,e=!1;if(c.frequency=[{value:b.EVERY_MINUTE,label:"Minute"},{value:b.EVERY_HOUR,label:"Hour"},{value:b.EVERY_DAY,label:"Day"},{value:b.EVERY_WEEK,label:"Week"},{value:b.EVERY_MONTH,label:"Month"},{value:b.EVERY_YEAR,label:"Year"}],angular.isDefined(c.init)&&(d=angular.copy(c.init),c.myFrequency=a.fromCron(c.init,!!c.multiMode)),c.$watch("init",function(b){angular.isDefined(b)&&b&&b!==d&&(e=!0,c.myFrequency=a.fromCron(b,!!c.multiMode))}),"object"==typeof c.config&&!c.config.length){var f=Object.keys(c.config.options);for(var g in f){var h=f[g].replace(/^allow/,""),i=f[g];if(!c.config.options[i])for(var j in c.frequency)c.frequency[j].label===h&&c.frequency.splice(j,1)}}var k=function(a,b,c){var d=[];c=c||(a>b?-1:1);for(var e=a;b>=e;e+=c)d.push(e);return d};c.minuteValue=k(0,55,5),c.hourValue=k(0,23),c.dayOfMonthValue=k(1,31),c.dayValue=k(0,6),c.monthValue=k(1,12),c.$watch("myFrequency",function(d,f){!d||f&&d.base===f.base||e?d&&d.base&&f&&f.base&&(e=!1):d&&d.base&&(d.base=parseInt(d.base),d.base>=b.EVERY_HOUR&&(d.minuteValue=c.minuteValue[0]),d.base>=b.EVERY_DAY&&(d.hourValue=c.hourValue[0]),d.base===b.EVERY_WEEK&&(d.dayValue=c.dayValue[0]),d.base>=b.EVERY_MONTH&&(d.dayOfMonthValue=c.dayOfMonthValue[0]),d.base===b.EVERY_YEAR&&(d.monthValue=c.monthValue[0])),c.output=a.setCron(d,!!c.multiMode)},!0)}}}]).filter("cronNumeral",function(){return function(a){switch(a){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";case 21:return"21st";case 22:return"22nd";case 23:return"23rd";case 31:return"31st";case null:return null;default:return a+"th"}}}).filter("cronMonthName",function(){var a=["January","February","March","April","May","June","July","August","September","October","November","December"];return function(b){var c=parseInt(b,10)-1;return null!==b&&angular.isDefined(a[c])?a[c]:null}}).filter("cronDayName",function(){var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return function(b){return b=parseInt(b,10),null!==b&&angular.isDefined(a[b])?a[b]:null}})}(),function(){"use strict";angular.module("angular-cron-jobs").factory("cronService",["cronFrequency",function(a){var b={};return b.setCron=function(b,c){var d=["*","*","*","*","*"],e=function(a){return angular.isUndefined(a)||""===a?"*":c&&angular.isArray(a)?a.length>0?a.join(","):"*":a};return b&&b.base&&(b.base>=a.EVERY_HOUR&&(d[0]=e(b.minuteValue)),b.base>=a.EVERY_DAY&&(d[1]=e(b.hourValue)),b.base===a.EVERY_WEEK&&(d[4]=e(b.dayValue)),b.base>=a.EVERY_MONTH&&(d[2]=e(b.dayOfMonthValue)),b.base===a.EVERY_YEAR&&(d[3]=e(b.monthValue))),console.log("Cron",d),d.join(" ")},b.fromCron=function(b,c){for(var d=b.replace(/\s+/g," ").split(" "),e={base:"1"};d.length<5;)d.push("*");var f=function(a){return c?a.split(",").map(function(a){return parseInt(a,10)}):parseInt(a)};return"*"===d[0]&&"*"===d[1]&&"*"===d[2]&&"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_MINUTE:"*"===d[1]&&"*"===d[2]&&"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_HOUR:"*"===d[2]&&"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_DAY:"*"===d[2]&&"*"===d[3]?e.base=a.EVERY_WEEK:"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_MONTH:"*"===d[4]&&(e.base=a.EVERY_YEAR),"*"!==d[0]&&(e.minuteValue=f(d[0])),"*"!==d[1]&&(e.hourValue=f(d[1])),"*"!==d[2]&&(e.dayOfMonthValue=f(d[2])),"*"!==d[3]&&(e.monthValue=f(d[3])),"*"!==d[4]&&(e.dayValue=f(d[4])),e},b}])}();