/**
 * UI Component For Creating Cron Job Syntax To Send To Server
 * @version v1.4.1 - 2015-11-18 * @link https://github.com/jacobscarter/angular-cron-jobs
 * @author Jacob Carter <jacob@ieksolutions.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("templates-angularcronjobs",["cronselection.html"]),angular.module("cronselection.html",[]).run(["$templateCache",function(a){a.put("cronselection.html",'<div class="cron-wrap">\n<span>Every: </span>\n	<select class="cron-select" ng-model="cron.myFrequency.base" ng-options="item.value as item.label for item in cron.frequency"></select>\n\n	<div class="select-options" ng-if="!cron.multiMode">\n		<span ng-show="cron.myFrequency.base == 4"> on </span>\n		<select ng-show="cron.myFrequency.base == 4" class="cron-select day-value" ng-model="cron.myFrequency.dayValue" ng-options="(value | cronDayName) for value in cron.dayValue"></select>\n		<span ng-show="cron.myFrequency.base >= 5">on the </span>\n		<select ng-show="cron.myFrequency.base >= 5" class="cron-select day-of-month-value" ng-model="cron.myFrequency.dayOfMonthValue" ng-options="(value | cronNumeral) for value in cron.dayOfMonthValue" ></select>\n		<span ng-show="cron.myFrequency.base == 6">of </span>\n		<select ng-show="cron.myFrequency.base == 6" class="cron-select month-value" ng-model="cron.myFrequency.monthValue" ng-options="(value | cronMonthName) for value in cron.monthValue" ></select>\n		<span ng-show="cron.myFrequency.base >= 2">at </span>\n		<select ng-show="cron.myFrequency.base >= 3" class="cron-select hour-value" ng-model="cron.myFrequency.hourValue" ng-options="value for value in cron.hourValue"></select>\n		<span ng-show="cron.myFrequency.base >= 3"> : </span>\n		<select ng-show="cron.myFrequency.base >= 2" class="cron-select minute-value" ng-model="cron.myFrequency.minuteValue" ng-options="value for value in cron.minuteValue"></select>\n		<span ng-show="cron.myFrequency.base == 2"> past the hour</span>\n	</div>\n\n    <div class="select-options" ng-if="cron.multiMode">\n        <span ng-show="cron.myFrequency.base == 4"> on </span>\n        <select multiple=\'multiple\'  ng-show="cron.myFrequency.base == 4" class="cron-select day-value" ng-model="cron.myFrequency.dayValue" ng-options="(value | cronDayName) for value in cron.dayValue"></select>\n        <span ng-show="cron.myFrequency.base >= 5">on the </span>\n        <select multiple=\'multiple\'  ng-show="cron.myFrequency.base >= 5" class="cron-select day-of-month-value" ng-model="cron.myFrequency.dayOfMonthValue" ng-options="(value | cronNumeral) for value in cron.dayOfMonthValue" ></select>\n        <span ng-show="cron.myFrequency.base == 6">of </span>\n        <select multiple=\'multiple\'  ng-show="cron.myFrequency.base == 6" class="cron-select month-value" ng-model="cron.myFrequency.monthValue" ng-options="(value | cronMonthName) for value in cron.monthValue" ></select>\n        <span ng-show="cron.myFrequency.base >= 2">at </span>\n        <select multiple=\'multiple\'  ng-show="cron.myFrequency.base >= 3" class="cron-select hour-value" ng-model="cron.myFrequency.hourValue" ng-options="value for value in cron.hourValue"></select>\n        <span ng-show="cron.myFrequency.base >= 3"> : </span>\n        <select multiple=\'multiple\'  ng-show="cron.myFrequency.base >= 2" class="cron-select minute-value" ng-model="cron.myFrequency.minuteValue" ng-options="value for value in cron.minuteValue"></select>\n        <span ng-show="cron.myFrequency.base == 2"> past the hour</span>\n    </div>\n</div>\n')}]),angular.module("angular-cron-jobs",["templates-angularcronjobs"]),function(){"use strict";angular.module("angular-cron-jobs").value("cronFrequency",{EVERY_MINUTE:1,EVERY_HOUR:2,EVERY_DAY:3,EVERY_WEEK:4,EVERY_MONTH:5,EVERY_YEAR:6})}(),function(){"use strict";angular.module("angular-cron-jobs").controller("CronJobInputController",["$scope","cronService","cronFrequency",function(a,b,c){var d=this,e=void 0,f=!1;if(d.frequency=[{value:c.EVERY_MINUTE,label:"Minute"},{value:c.EVERY_HOUR,label:"Hour"},{value:c.EVERY_DAY,label:"Day"},{value:c.EVERY_WEEK,label:"Week"},{value:c.EVERY_MONTH,label:"Month"},{value:c.EVERY_YEAR,label:"Year"}],angular.isDefined(d.init)&&(e=angular.copy(d.init),d.myFrequency=b.fromCron(d.init,!!d.multiMode)),"object"==typeof d.config&&!angular.isArray(d.config)){var g=Object.keys(d.config.options);for(var h in g){var i=g[h].replace(/^allow/,""),j=g[h];if(!d.config.options[j])for(var k in d.frequency)d.frequency[k].label===i&&d.frequency.splice(k,1)}}var l=function(a,b,c){var d=[];c=c||(a>b?-1:1);for(var e=a;b>=e;e+=c)d.push(e);return d};d.minuteValue=l(0,55,5),d.hourValue=l(0,23),d.dayOfMonthValue=l(1,31),d.dayValue=l(0,6),d.monthValue=l(1,12),a.$watch("cron.init",function(a){angular.isDefined(a)&&a&&a!==e&&(f=!0,d.myFrequency=b.fromCron(a,!!d.multiMode))}),a.$watch("cron.myFrequency",function(a,e){!a||e&&a.base===e.base||f?a&&a.base&&e&&e.base&&(f=!1):a&&a.base&&(a.base=parseInt(a.base,10),a.base>=c.EVERY_HOUR&&(a.minuteValue=d.multiMode?[d.minuteValue[0]]:d.minuteValue[0]),a.base>=c.EVERY_DAY&&(a.hourValue=d.multiMode?[d.hourValue[0]]:d.hourValue[0]),a.base===c.EVERY_WEEK&&(a.dayValue=d.multiMode?[d.dayValue[0]]:d.dayValue[0]),a.base>=c.EVERY_MONTH&&(a.dayOfMonthValue=d.multiMode?[d.dayOfMonthValue[0]]:d.dayOfMonthValue[0]),a.base===c.EVERY_YEAR&&(a.monthValue=d.multiMode?[d.monthValue[0]]:d.monthValue[0])),d.output=b.setCron(a,!!d.multiMode)},!0)}]),angular.module("angular-cron-jobs").directive("cronSelection",[function(a,b){return{restrict:"EA",replace:!0,scope:{config:"=",output:"=?",init:"=?",multiMode:"="},templateUrl:function(a,b){return b.template||"cronselection.html"},bindToController:!0,controllerAs:"cron",controller:"CronJobInputController",link:function(a){console.log("Passed in: ",JSON.stringify(a.cron))}}}]).filter("cronNumeral",function(){return function(a){switch(a){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";case 21:return"21st";case 22:return"22nd";case 23:return"23rd";case 31:return"31st";case null:return null;default:return a+"th"}}}).filter("cronMonthName",function(){var a=["January","February","March","April","May","June","July","August","September","October","November","December"];return function(b){var c=parseInt(b,10)-1;return null!==b&&angular.isDefined(a[c])?a[c]:null}}).filter("cronDayName",function(){var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return function(b){return b=parseInt(b,10),null!==b&&angular.isDefined(a[b])?a[b]:null}})}(),function(){"use strict";angular.module("angular-cron-jobs").factory("cronService",["cronFrequency",function(a){var b={};return b.setCron=function(b,c){var d=["*","*","*","*","*"],e=function(a){return angular.isUndefined(a)||""===a?"*":c&&angular.isArray(a)?a.length>0?a.join(","):"*":a};return b&&b.base&&(b.base>=a.EVERY_HOUR&&(d[0]=e(b.minuteValue)),b.base>=a.EVERY_DAY&&(d[1]=e(b.hourValue)),b.base===a.EVERY_WEEK&&(d[4]=e(b.dayValue)),b.base>=a.EVERY_MONTH&&(d[2]=e(b.dayOfMonthValue)),b.base===a.EVERY_YEAR&&(d[3]=e(b.monthValue))),d.join(" ")},b.fromCron=function(b,c){for(var d=b?b.replace(/\s+/g," ").split(" "):[],e={base:"1"};d.length<5;)d.push("*");var f=function(a){return c?a.split(",").map(function(a){return parseInt(a,10)}):parseInt(a)};return"*"===d[0]&&"*"===d[1]&&"*"===d[2]&&"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_MINUTE:"*"===d[1]&&"*"===d[2]&&"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_HOUR:"*"===d[2]&&"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_DAY:"*"===d[2]&&"*"===d[3]?e.base=a.EVERY_WEEK:"*"===d[3]&&"*"===d[4]?e.base=a.EVERY_MONTH:"*"===d[4]&&(e.base=a.EVERY_YEAR),"*"!==d[0]&&(e.minuteValue=f(d[0])),"*"!==d[1]&&(e.hourValue=f(d[1])),"*"!==d[2]&&(e.dayOfMonthValue=f(d[2])),"*"!==d[3]&&(e.monthValue=f(d[3])),"*"!==d[4]&&(e.dayValue=f(d[4])),e},b}])}();