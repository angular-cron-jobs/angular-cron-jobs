/**
 * UI Component For Creating Cron Job Syntax To Send To Server
 * @version v2.1.1 - 2016-07-01 * @link https://github.com/jacobscarter/angular-cron-jobs
 * @author Jacob Carter <jacob@ieksolutions.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("templates-angularcronjobs",["cronselection.html"]),angular.module("cronselection.html",[]).run(["$templateCache",function(a){a.put("cronselection.html",'<div class="cron-wrap">\n    <span>Every: </span>\n    <div class="cron-select-wrap">\n        <select class="cron-select" ng-model="myFrequency.base" ng-options="item.value as item.label for item in frequency"></select>\n    </div>\n    <div class="select-options">\n        <span ng-show="myFrequency.base == baseFrequency.week">on </span>\n        <div ng-show="myFrequency.base == baseFrequency.week" class="cron-select-wrap">\n            <!-- If Multiple is Enabled -->\n            <select class="cron-select day-value" ng-model="myFrequency.dayValue" ng-multiple="allowMultiple">\n                <option ng-repeat="value in dayValue" ng-selected="myFrequency.dayValue.indexOf(value) >= 0" value="{{value}}">\n                    {{value | cronDayName}}\n                </option>\n            </select>\n        </div>\n        <span ng-show="myFrequency.base >= baseFrequency.month">on the </span>\n        <div ng-show="myFrequency.base >= baseFrequency.month" class="cron-select-wrap">\n            <select class="cron-select day-of-month-value" ng-model="myFrequency.dayOfMonthValue" ng-multiple="allowMultiple">\n                <option ng-repeat="value in dayOfMonthValue" ng-selected="myFrequency.dayOfMonthValue.indexOf(value) >= 0" value="{{value}}">\n                    {{value | cronNumeral}}\n                </option>\n            </select>\n        </div>\n        <span ng-show="myFrequency.base == baseFrequency.year">of </span>\n        <div ng-show="myFrequency.base == baseFrequency.year" class="cron-select-wrap">\n            <select class="cron-select month-value" ng-model="myFrequency.monthValue" ng-multiple="allowMultiple">\n                <option ng-repeat="value in monthValue" ng-selected="myFrequency.monthValue.indexOf(value) >= 0" value="{{value}}">\n                    {{value | cronMonthName}}\n                </option>\n            </select>\n        </div>\n        <span ng-show="myFrequency.base >= baseFrequency.hour">at </span>\n        <div ng-show="myFrequency.base >= baseFrequency.day" class="cron-select-wrap">\n            <select class="cron-select hour-value" ng-model="myFrequency.hourValue" ng-multiple="allowMultiple">\n                <option ng-repeat="value in hourValue" ng-selected="myFrequency.hourValue.indexOf(value) >= 0" value="{{value}}">\n                    {{value}}\n                </option>\n            </select>\n        </div>\n        <span ng-show="myFrequency.base >= baseFrequency.day"> : </span>\n        <div ng-show="myFrequency.base >= baseFrequency.hour" class="cron-select-wrap">\n            <select class="cron-select minute-value" ng-model="myFrequency.minuteValue"  ng-multiple="allowMultiple">\n                <option ng-repeat="value in minuteValue" ng-selected="myFrequency.minuteValue.indexOf(value) >= 0" value="{{value}}">\n                    {{value}}\n                </option>\n            </select>\n        </div>\n        <span ng-show="myFrequency.base == baseFrequency.hour"> past the hour</span>\n    </div>\n</div>\n')}]),angular.module("angular-cron-jobs",["templates-angularcronjobs"]),angular.module("angular-cron-jobs").directive("cronSelection",["cronService","baseFrequency",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,scope:{config:"=",output:"=?",init:"=?",myFrequency:"=?frequency"},templateUrl:function(a,b){return b.template||"cronselection.html"},link:function(c){var d=void 0,e=!1;if(c.baseFrequency=b,c.frequency=[{value:1,label:"Minute"},{value:2,label:"Hour"},{value:3,label:"Day"},{value:4,label:"Week"},{value:5,label:"Month"},{value:6,label:"Year"}],angular.isDefined(c.init)&&(d=angular.copy(c.init),c.myFrequency=a.fromCron(c.init)),c.$watch("init",function(b){angular.isDefined(b)&&b&&b!==d&&(e=!0,c.myFrequency=a.fromCron(b))}),"object"==typeof c.config&&!c.config.length){if("object"==typeof c.config.options){var f=Object.keys(c.config.options);for(var g in f){var h=f[g].replace(/^allow/,""),i=f[g];if(!c.config.options[i])for(var j in c.frequency)c.frequency[j].label===h&&c.frequency.splice(j,1)}}angular.isDefined(c.config.allowMultiple)?c.allowMultiple=c.config.allowMultiple:c.allowMultiple=!1}c.minuteValue=[0,5,10,15,20,25,30,35,40,45,50,55],c.hourValue=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],c.dayOfMonthValue=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],c.dayValue=[0,1,2,3,4,5,6],c.monthValue=[1,2,3,4,5,6,7,8,9,10,11,12],c.$watch("myFrequency",function(d,f){!d||f&&d.base===f.base||e?d&&d.base&&f&&f.base&&(e=!1):(d&&d.base&&(d.base=parseInt(d.base)),d&&d.base&&d.base>=b.hour&&(d.minuteValue=c.minuteValue[0]),d&&d.base&&d.base>=b.day&&(d.hourValue=c.hourValue[0]),d&&d.base&&d.base===b.week&&(d.dayValue=c.dayValue[0]),d&&d.base&&d.base>=b.month&&(d.dayOfMonthValue=c.dayOfMonthValue[0]),d&&d.base&&d.base===b.year&&(d.monthValue=c.monthValue[0])),c.output=a.setCron(d)},!0)}}}]).filter("cronNumeral",function(){return function(a){switch(a){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";case 21:return"21st";case 22:return"22nd";case 23:return"23rd";case 31:return"31st";case null:return null;default:return a+"th"}}}).filter("cronMonthName",function(){return function(a){var b={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"};return null!==a&&angular.isDefined(b[a])?b[a]:null}}).filter("cronDayName",function(){return function(a){var b={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"};return null!==a&&angular.isDefined(b[a])?b[a]:null}}).directive("ngMultiple",function(){return{restrict:"A",scope:{ngMultiple:"="},link:function(a,b){a.$watch("ngMultiple",function(a){a?b.attr("multiple","multiple"):b.removeAttr("multiple")})}}}),angular.module("angular-cron-jobs").value("baseFrequency",{minute:1,hour:2,day:3,week:4,month:5,year:6}).factory("cronService",["baseFrequency",function(a){var b={};return b.setCron=function(b){var c=["*","*","*","*","*"];return b&&b.base&&b.base>=a.hour&&(c[0]=void 0!==typeof b.minuteValue?b.minuteValue:"*"),b&&b.base&&b.base>=a.day&&(c[1]=void 0!==typeof b.hourValue?b.hourValue:"*"),b&&b.base&&b.base===a.week&&(c[4]=b.dayValue),b&&b.base&&b.base>=a.month&&(c[2]=void 0!==typeof b.dayOfMonthValue?b.dayOfMonthValue:"*"),b&&b.base&&b.base===a.year&&(c[3]=void 0!==typeof b.monthValue?b.monthValue:"*"),c.join(" ")},b.fromCron=function(a){var b=a.replace(/\s+/g," ").split(" "),c={base:"1"};if("*"===b[0]&&"*"===b[1]&&"*"===b[2]&&"*"===b[3]&&"*"===b[4]?c.base=1:"*"===b[1]&&"*"===b[2]&&"*"===b[3]&&"*"===b[4]?c.base=2:"*"===b[2]&&"*"===b[3]&&"*"===b[4]?c.base=3:"*"===b[2]&&"*"===b[3]?c.base=4:"*"===b[3]&&"*"===b[4]?c.base=5:"*"===b[4]&&(c.base=6),"*"!==b[0])if(b[0].indexOf(",")>=0){for(var d=b[0].split(","),e=0;e<d.length;e++)d[e]=+d[e];c.minuteValue=d}else c.minuteValue=[parseInt(b[0])];if("*"!==b[1])if(b[1].indexOf(",")>=0){for(var d=b[1].split(","),e=0;e<d.length;e++)d[e]=+d[e];c.hourValue=d}else c.hourValue=[parseInt(b[1])];if("*"!==b[2])if(b[2].indexOf(",")>=0){for(var d=b[2].split(","),e=0;e<d.length;e++)d[e]=+d[e];c.dayOfMonthValue=d}else c.dayOfMonthValue=[parseInt(b[2])];if("*"!==b[3])if(b[3].indexOf(",")>=0){for(var d=b[3].split(","),e=0;e<d.length;e++)d[e]=+d[e];c.monthValue=d}else c.monthValue=[parseInt(b[3])];if("*"!==b[4])if(b[4].indexOf(",")>=0){for(var d=b[4].split(","),e=0;e<d.length;e++)d[e]=+d[e];c.dayValue=d}else c.dayValue=[parseInt(b[4])];return c},b}]);