/**
 * UI Component For Creating Cron Job Syntax To Send To Server
 * @version v3.2.0 - 2016-11-25 * @link https://github.com/jacobscarter/angular-cron-jobs
 * @author Jacob Carter <jc@jacobcarter.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("templates-angularcronjobs",["cronselection.html"]),angular.module("cronselection.html",[]).run(["$templateCache",function(a){a.put("cronselection.html",'<div class="cron-wrap">\n    <span>Every: </span>\n    <div class="cron-select-wrap">\n        <select class="cron-select" ng-model="myFrequency.base" ng-options="item.value as item.label for item in frequency"></select>\n    </div>\n    <div class="select-options">\n        <span ng-show="myFrequency.base == 4">on </span>\n        <div ng-show="myFrequency.base == 4" class="cron-select-wrap">\n            <!-- If Multiple is Enabled -->\n            <select class="cron-select day-value"\n                    ng-model="myFrequency.dayValues"\n                    ng-if="allowMultiple" multiple\n                    ng-options="value as (value | cronDayName: cronStyle) for value in dayValues">\n            </select>\n            <!-- If Multiple is not Enabled -->\n            <select class="cron-select day-value"\n                    ng-model="myFrequency.dayValues"\n                    ng-if="!allowMultiple"\n                    ng-options="value as (value | cronDayName: cronStyle) for value in dayValues">\n            </select>\n        </div>\n        <span ng-show="myFrequency.base >= 5">on the </span>\n        <div ng-show="myFrequency.base >= 5" class="cron-select-wrap">\n            <!-- If Multiple is Enabled -->\n            <select class="cron-select day-of-month-value"\n                    ng-model="myFrequency.dayOfMonthValues"\n                    ng-if="allowMultiple" multiple\n                    ng-options="value as (value | cronNumeral) for value in dayOfMonthValues">\n            </select>\n            <!-- If Multiple is not Enabled -->\n            <select class="cron-select day-of-month-value"\n                    ng-model="myFrequency.dayOfMonthValues"\n                    ng-if="!allowMultiple"\n                    ng-options="value as (value | cronNumeral) for value in dayOfMonthValues">\n            </select>\n        </div>\n        <span ng-show="myFrequency.base == 6">of </span>\n        <!-- If Multiple is Enabled -->\n        <div ng-show="myFrequency.base == 6" class="cron-select-wrap">\n            <select class="cron-select month-value"\n                    ng-model="myFrequency.monthValues"\n                    ng-if="allowMultiple" multiple\n                    ng-options="value as (value | cronMonthName) for value in monthValues">\n            </select>\n            <!-- If Multiple is not Enabled -->\n            <select class="cron-select month-value"\n                    ng-model="myFrequency.monthValues"\n                    ng-if="!allowMultiple"\n                    ng-options="value as (value | cronMonthName) for value in monthValues">\n            </select>\n        </div>\n        <span ng-show="myFrequency.base >= 2">at </span>\n        <!-- If Multiple is Enabled -->\n        <div ng-show="myFrequency.base >= 3" class="cron-select-wrap">\n            <select class="cron-select hour-value"\n                    ng-model="myFrequency.hourValues"\n                    ng-if="allowMultiple" multiple\n                    ng-options="value as value for value in hourValues">\n            </select>\n            <!-- If Multiple is not Enabled -->\n            <select class="cron-select hour-value"\n                    ng-model="myFrequency.hourValues"\n                    ng-if="!allowMultiple"\n                    ng-options="value as value for value in hourValues">\n            </select>\n        </div>\n        <span ng-show="myFrequency.base >= 3"> : </span>\n        <!-- If Multiple is Enabled -->\n        <div ng-show="myFrequency.base >= 2" class="cron-select-wrap">\n            <select class="cron-select minute-value"\n                    ng-model="myFrequency.minuteValues"\n                    ng-if="allowMultiple" multiple\n                    ng-options="value as value for value in minuteValues">\n            </select>\n            <!-- If Multiple is not Enabled -->\n            <select class="cron-select minute-value"\n                    ng-model="myFrequency.minuteValues"\n                    ng-if="!allowMultiple"\n                    ng-options="value as value for value in minuteValues">\n            </select>\n        </div>\n        <span ng-show="myFrequency.base == 2"> past the hour</span>\n        <!-- Custom Cron Expression -->\n        <span ng-show="myFrequency.base == 0"> Expression: </span>\n        <span style="color:red" ng-show="customInput.$error.pattern">Invalid Input</span>\n        <div ng-show="myFrequency.base == 0" class="cron-select-wrap">\n            <input name="customInput" type="text" class="cron-select custom-value" value="myFrequency.custom" ng-model="myFrequency.custom" title="Insert valid cron expression" pattern="^\\s*($|#|\\w+\\s*=|(\\?|\\*|(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?(?:,(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?)*)\\s+(\\?|\\*|(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?(?:,(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?)*)\\s+(\\?|\\*|(?:[01]?\\d|2[0-3])(?:(?:-|\\/|\\,)(?:[01]?\\d|2[0-3]))?(?:,(?:[01]?\\d|2[0-3])(?:(?:-|\\/|\\,)(?:[01]?\\d|2[0-3]))?)*)\\s+(\\?|\\*|(?:0?[1-9]|[12]\\d|3[01])(?:(?:-|\\/|\\,)(?:0?[1-9]|[12]\\d|3[01]))?(?:,(?:0?[1-9]|[12]\\d|3[01])(?:(?:-|\\/|\\,)(?:0?[1-9]|[12]\\d|3[01]))?)*)\\s+(\\?|\\*|(?:[1-9]|1[012])(?:(?:-|\\/|\\,)(?:[1-9]|1[012]))?(?:L|W)?(?:,(?:[1-9]|1[012])(?:(?:-|\\/|\\,)(?:[1-9]|1[012]))?(?:L|W)?)*|\\?|\\*|(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(?:(?:-)(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))?(?:,(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(?:(?:-)(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))?)*)\\s+(\\?|\\*|(?:[0-6])(?:(?:-|\\/|\\,|#)(?:[0-6]))?(?:L)?(?:,(?:[0-6])(?:(?:-|\\/|\\,|#)(?:[0-6]))?(?:L)?)*|\\?|\\*|(?:MON|TUE|WED|THU|FRI|SAT|SUN)(?:(?:-)(?:MON|TUE|WED|THU|FRI|SAT|SUN))?(?:,(?:MON|TUE|WED|THU|FRI|SAT|SUN)(?:(?:-)(?:MON|TUE|WED|THU|FRI|SAT|SUN))?)*)(|\\s)+(\\?|\\*|(?:|\\d{4})(?:(?:-|\\/|\\,)(?:|\\d{4}))?(?:,(?:|\\d{4})(?:(?:-|\\/|\\,)(?:|\\d{4}))?)*))$">\n        </div>\n    </div>\n</div>\n')}]),angular.module("angular-cron-jobs",["templates-angularcronjobs"]),angular.module("angular-cron-jobs").directive("cronSelection",["cronService","baseFrequency",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,require:"ngModel",scope:{ngModel:"=",config:"=",myFrequency:"=?frequency"},templateUrl:function(a,b){return b.template||"cronselection.html"},link:function(c,d,e,f){function g(a){a.base=parseInt(a.base),a.base>=b.hour&&(a.minuteValues=c.minuteValues[0]),a.base>=b.day&&(a.hourValues=c.hourValues[0]),a.base===b.week&&(a.dayValues=c.dayValues[0]),a.base>=b.month&&(a.dayOfMonthValues=c.dayOfMonthValues[0]),a.base===b.year&&(a.monthValues=c.monthValues[0]),a.base===b.custom&&(a.custom="* * * * * *")}var h=!1,i=!1;if(c.baseFrequency=b,c.frequency=[{value:1,label:"Minute"},{value:2,label:"Hour"},{value:3,label:"Day"},{value:4,label:"Week"},{value:5,label:"Month"},{value:6,label:"Year"},{value:0,label:"Custom"}],c.$watch("ngModel",function(b){angular.isDefined(b)&&b&&(h=!0,c.myFrequency=a.fromCron(b,c.allowMultiple,c.cronStyle,i))}),"object"==typeof c.config&&!c.config.length){if("object"==typeof c.config.options){var j=Object.keys(c.config.options);for(var k in j){var l=j[k].replace(/^allow/,""),m=j[k];if(!c.config.options[m])for(var n in c.frequency)c.frequency[n].label===l&&c.frequency.splice(n,1)}}angular.isDefined(c.config.allowMultiple)?c.allowMultiple=c.config.allowMultiple:c.allowMultiple=!1,angular.isDefined(c.config.quartz)&&c.config.quartz?c.cronStyle="quartz":c.cronStyle="default"}c.minuteValues=[0,5,10,15,20,25,30,35,40,45,50,55],c.hourValues=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],c.dayOfMonthValues=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],c.dayValues=[0,1,2,3,4,5,6],c.monthValues=[1,2,3,4,5,6,7,8,9,10,11,12],"quartz"===c.cronStyle&&(c.dayValues=[1,2,3,4,5,6,7]),c.$watch("myFrequency",function(b,d){if(void 0!==b){!b||!b.base||d&&b.base===d.base||h?b&&b.base&&d&&d.base&&(h=!1):g(b),i=0===b.base;var e=a.setCron(b,c.cronStyle);f.$setViewValue(e)}},!0)}}}]).filter("cronNumeral",function(){return function(a){switch(a){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";case 21:return"21st";case 22:return"22nd";case 23:return"23rd";case 31:return"31st";case null:return null;default:return a+"th"}}}).filter("cronMonthName",function(){return function(a){var b={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"};return null!==a&&angular.isDefined(b[a])?b[a]:null}}).filter("cronDayName",function(){return function(a,b){var c;return c="quartz"===b?{1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday",7:"Saturday"}:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},null!==a&&angular.isDefined(c[a])?c[a]:null}}).directive("ngMultiple",function(){return{restrict:"A",scope:{ngMultiple:"="},link:function(a,b){a.$watch("ngMultiple",function(a){a?b.attr("multiple","multiple"):b.removeAttr("multiple")})}}}),angular.module("angular-cron-jobs").value("baseFrequency",{minute:1,hour:2,day:3,week:4,month:5,year:6,custom:0}).factory("cronService",["baseFrequency",function(a){var b={};return b.setCron=function(a,b){return"quartz"===b?this.setQuartzCron(a):this.setDefaultCron(a)},b.setQuartzCron=function(b){var c=["0","*","*","*","*","?"];return b&&"undefined"!=typeof b.base&&b.base===a.custom?b.custom:(b&&b.base&&b.base>=a.hour&&(c[1]="undefined"!=typeof b.minuteValues?b.minuteValues:"0"),b&&b.base&&b.base>=a.day&&(c[2]="undefined"!=typeof b.hourValues?b.hourValues:"*"),b&&b.base&&b.base===a.week&&(c[3]="?",c[5]=b.dayValues),b&&b.base&&b.base>=a.month&&(c[3]="undefined"!=typeof b.dayOfMonthValues?b.dayOfMonthValues:"?"),b&&b.base&&b.base===a.year&&(c[4]="undefined"!=typeof b.monthValues?b.monthValues:"*"),c.join(" "))},b.setDefaultCron=function(b){var c=["*","*","*","*","*"];return b&&"undefined"!=typeof b.base&&b.base===a.custom?b.custom:(b&&b.base&&b.base>=a.hour&&(c[0]="undefined"!=typeof b.minuteValues?b.minuteValues:"*"),b&&b.base&&b.base>=a.day&&(c[1]="undefined"!=typeof b.hourValues?b.hourValues:"*"),b&&b.base&&b.base===a.week&&(c[4]=b.dayValues),b&&b.base&&b.base>=a.month&&(c[2]="undefined"!=typeof b.dayOfMonthValues?b.dayOfMonthValues:"*"),b&&b.base&&b.base===a.year&&(c[3]="undefined"!=typeof b.monthValues?b.monthValues:"*"),c.join(" "))},b.fromCron=function(a,b,c,d){return"quartz"===c?this.fromQuartzCron(a,b,d):this.fromDefaultCron(a,b,d)},b.fromDefaultCron=function(b,c,d){var e=b.replace(/\s+/g," ").split(" "),f={base:"1"},g=[];if("*"===e[0]&&"*"===e[1]&&"*"===e[2]&&"*"===e[3]&&"*"===e[4]?f.base=a.minute:"*"===e[1]&&"*"===e[2]&&"*"===e[3]&&"*"===e[4]?f.base=a.hour:"*"===e[2]&&"*"===e[3]&&"*"===e[4]?f.base=a.day:"*"===e[2]&&"*"===e[3]?f.base=a.week:"*"===e[3]&&"*"===e[4]?f.base=a.month:"*"===e[4]&&(f.base=a.year),"*"!==e[0])if(c){g=e[0].split(",");for(var h=0;h<g.length;h++)g[h]=+g[h];f.minuteValues=g}else f.minuteValues=parseInt(e[0]);if("*"!==e[1])if(c){g=e[1].split(",");for(var h=0;h<g.length;h++)g[h]=+g[h];f.hourValues=g}else f.hourValues=parseInt(e[1]);if("*"!==e[2])if(c){g=e[2].split(",");for(var h=0;h<g.length;h++)g[h]=+g[h];f.dayOfMonthValues=g}else f.dayOfMonthValues=parseInt(e[2]);if("*"!==e[3])if(c){g=e[3].split(",");for(var h=0;h<g.length;h++)g[h]=+g[h];f.monthValues=g}else f.monthValues=parseInt(e[3]);if("*"!==e[4])if(c){g=e[4].split(",");for(var h=0;h<g.length;h++)g[h]=+g[h];f.dayValues=g}else f.dayValues=parseInt(e[4]);return d&&(f.base=0),f.custom=b,f},b.fromQuartzCron=function(a,b,c){var d=a.replace(/\s+/g," ").split(" "),e={base:"1"},f=[];if("*"===d[1]&&"*"===d[2]&&"*"===d[3]&&"*"===d[4]&&"?"===d[5]?e.base=1:"*"===d[2]&&"*"===d[3]&&"*"===d[4]&&"?"===d[5]?e.base=2:"*"===d[3]&&"*"===d[4]&&"?"===d[5]?e.base=3:"?"===d[3]?e.base=4:"*"===d[4]&&"?"===d[5]?e.base=5:"?"===d[5]&&(e.base=6),"*"!==d[1])if(b){f=d[1].split(",");for(var g=0;g<f.length;g++)f[g]=+f[g];e.minuteValues=f}else e.minuteValues=parseInt(d[1]);if("*"!==d[2])if(b){f=d[2].split(",");for(var g=0;g<f.length;g++)f[g]=+f[g];e.hourValues=f}else e.hourValues=parseInt(d[2]);if("*"!==d[3]&&"?"!==d[3])if(b){f=d[3].split(",");for(var g=0;g<f.length;g++)f[g]=+f[g];e.dayOfMonthValues=f}else e.dayOfMonthValues=parseInt(d[3]);if("*"!==d[4])if(b){f=d[4].split(",");for(var g=0;g<f.length;g++)f[g]=+f[g];e.monthValues=f}else e.monthValues=parseInt(d[4]);if("*"!==d[5]&&"?"!==d[5])if(b){f=d[5].split(",");for(var g=0;g<f.length;g++)f[g]=+f[g];e.dayValues=f}else e.dayValues=parseInt(d[5]);return c&&(e.base=0),e.custom=a,e},b}]);